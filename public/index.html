<!DOCTYPE html>
<html lang="en-US" prefix="og: http://ogp.me/ns#">
<head>
	<meta name="generator" content="Hugo 0.57.2" />
<base href="https://www.itforarchivists.com">
<title>IT for archivists</title>
<meta charset="utf-8">
<meta name="description" content="richard&#39;s site">
<meta name="viewport" content="width=device-width, initial-scale=1.0"/> 
<meta name="keywords" content="archivists technology">
<meta property="og:type" content="article"/>
<meta property="og:description" content=""/>
<meta property="og:title" content=""/>
<meta property="og:site_name" content="IT for archivists"/>
<meta property="og:image" content=""/>
<meta property="og:image:type" content="image/jpeg"/>
<meta property="og:image:width" content=""/>
<meta property="og:image:height" content=""/>
<meta property="og:url" content="https://www.itforarchivists.com">
<meta property="og:locale" content="en_AU">
<meta property="article:published_time" content="0001-01-01"/>
<meta property="article:modified_time" content="0001-01-01"/>
<meta name="twitter:card" content="summary">
<meta name="twitter:site" content="IT for archivists">
<meta name="twitter:title" content="">
<meta name="twitter:creator" content="Richard Lehane">
<meta name="twitter:description" content="">
<meta name="twitter:image:src" content="">
<meta name="twitter:domain" content="https://www.itforarchivists.com"><link rel="canonical" href="https://www.itforarchivists.com/">
<link rel="alternate" type="application/rss&#43;xml" href="https://www.itforarchivists.com/index.xml">
<link rel="icon" type="image/png" href="https://www.itforarchivists.com/img/richard.png">

<link href='https://fonts.googleapis.com/css?family=Merriweather' rel='stylesheet' type='text/css'>
<link href='https://fonts.googleapis.com/css?family=PT+Serif' rel='stylesheet' type='text/css'>
<link href='https://fonts.googleapis.com/css?family=PT+Sans' rel='stylesheet' type='text/css'>
<link href='https://fonts.googleapis.com/css?family=PT+Sans+Narrow' rel='stylesheet' type='text/css'>
<link href="https://fonts.googleapis.com/css?family=Arizonia" rel="stylesheet" type="text/css">
<link href='https://fonts.googleapis.com/css?family=Gochi+Hand' rel='stylesheet' type='text/css'>
<link href='https://fonts.googleapis.com/css?family=Roboto+Slab' rel='stylesheet' type='text/css'>

<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css">

<link rel="stylesheet" href="https://unpkg.com/purecss@1.0.0/build/pure-min.css" integrity="sha384-nn4HPE8lTHyVtfCBi5yW9d20FjT8BJwUXyWZT9InLYax14RDjBj46LmSztkmNP9w" crossorigin="anonymous">
<link rel="stylesheet" href="https://unpkg.com/purecss@1.0.0/build/grids-responsive-min.css">
<link rel="stylesheet" href="https://www.itforarchivists.com/css/maia.css">

<link rel="stylesheet" href="https://www.itforarchivists.com/css/scheme_richard.css"><script>
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');
ga('create', 'UA-15845576-1', 'auto');
ga('send', 'pageview');
</script>
</head>
<body>
<div class="pure-g">
  <div class="pure-u-1-2">
    <a href="https://www.itforarchivists.com/" class="logo-img"><img src="img/richard.png" alt="Logo"></a>
    <a class="logo" href="https://www.itforarchivists.com/"><p class="logo-text">IT for archivists</p></a>
  </div>
  <div class="pure-u-1-2 nav">
  <div class="pure-menu pure-menu-horizontal">
    <ul class="pure-menu-list"><li class="pure-menu-item pure-menu-has-children pure-menu-allow-hover">
      <a href="https://www.itforarchivists.com/about" class="pure-menu-link">About</a>
      <ul class="pure-menu-children"><li class="pure-menu-item"><a href="https://www.itforarchivists.com/about/privacy/" class="menu-text pure-menu-link">Privacy</a></li></ul>
      </li><li class="pure-menu-item pure-menu-has-children pure-menu-allow-hover">
      <a href="#" class="pure-menu-link">Contact</a>
      <ul class="pure-menu-children">
        <li class="pure-menu-item"><a href="https://twitter.com/richardlehane" class="menu-text pure-menu-link"><i class="fa fa-twitter" aria-hidden="true"></i>&nbsp;twitter</a></li>
        
        <li class="pure-menu-item"><a href="https://github.com/richardlehane" class="menu-text pure-menu-link"><i class="fa fa-github" aria-hidden="true"></i>&nbsp;github</a></li>
        
        <li class="pure-menu-item"><a href="mailto:richard@itforarchivists.com" class="menu-text pure-menu-link"><i class="fa fa-envelope" aria-hidden="true"></i>&nbsp;email</a></li>
        </ul>
      </li>
      <li class="pure-menu-item"><a href="https://www.itforarchivists.com/siegfried" class="menu-text pure-menu-link"><img alt="siegfried" src="https://www.itforarchivists.com/img/sf-button.png"></a></li>
      </ul>
  </div>
  </div>
</div>


<div class="menu pure-menu pure-menu-horizontal">
  <ul class="pure-menu-list"><li class="pure-menu-item">
    	<a href="categories/siegfried" class="menu-text pure-menu-link">siegfried</a>
    </li></ul>
</div>
<div class="content pure-g">
  
    
    	<div id="banner" class="pure-u-1">
  <p class="article-title"><a href="https://www.itforarchivists.com/post/sf1713/">siegfried 1.7.13 released</a></p>
  <span class="article-date">Sunday, 18 August, 2019</span>
</div>    
<div class="pure-u-1">

<p>Version 1.7.13 of siegfried is now available. Get it <a href="https://www.itforarchivists.com/siegfried">here</a>.</p>

<p>This minor release fixes a in the namematcher that caused filenames containing &ldquo;?&rdquo; to be treated as URLs. It also adds the ability to scan directories using the <code>sf -f</code> command.</p>

<p>Updates to the LOC FDD and tika-mimetypes signature files.</p>

<h3 id="change-log-v1-7-13-2019-08-18">Change Log v1.7.13 (2019-08-18)</h3>

<p>Added:</p>

<ul>
<li>the <code>-f</code> flag now scans directories, as well as files. Requested by <a href="https://github.com/richardlehane/siegfried/issues/130">Harry Moss</a></li>
</ul>

<p>Changed:</p>

<ul>
<li>update LOC signatures to 2019-06-16</li>
<li>update tika-mimetypes signatures to v1.22</li>
</ul>

<p>Fixed:</p>

<ul>
<li>filenames with &ldquo;?&rdquo; were parsed as URLs; reported by <a href="https://github.com/richardlehane/siegfried/issues/129">workflowsguy</a></li>
</ul>
</div>
<div class="pure-u-1">
<span class="signature signature-text">Share:</span>
<a class= "signature" href="https://twitter.com/intent/tweet?text=I&#43;enjoyed&#43;this&#43;post&#43;on&#43;IT&#43;for&#43;archivists%3A&#43;siegfried&#43;1.7.13&#43;released&#43;%28https%3A%2F%2Fwww.itforarchivists.com%2Fpost%2Fsf1713%2F%29">
<span class="fa-stack">
  <i class="fa fa-circle fa-stack-2x"></i>
  <i class="fa fa-twitter fa-stack-1x fa-inverse"></i>
</span>
</a>
</div>
    
    	<div id="banner" class="pure-u-1">
  <p class="article-title"><a href="https://www.itforarchivists.com/post/sf1712/">siegfried 1.7.12 released</a></p>
  <span class="article-date">Saturday, 15 June, 2019</span>
</div>    
<div class="pure-u-1">

<p>Version 1.7.12 of siegfried is now available. Get it <a href="https://www.itforarchivists.com/siegfried">here</a>.</p>

<p>This minor release fixes a bug that caused .docx files with .doc extensions to panic and a bug with mime-info signatures.</p>

<p>Updates to the PRONOM (v95), LOC FDD and tika-mimetypes signature files.</p>

<h3 id="change-log-v1-7-12-2019-06-15">Change Log v1.7.12 (2019-06-15)</h3>

<p>Changed:</p>

<ul>
<li>update PRONOM to v95</li>
<li>update LOC signatures to 2019-05-20</li>
<li>update tika-mimetypes signatures to v1.21</li>
</ul>

<p>Fixed:</p>

<ul>
<li>.docx files with .doc extensions panic due to bug in division of hints in container matcher. Thanks to Jean-Séverin Lair for <a href="https://github.com/richardlehane/siegfried/issues/126">reporting and sharing samples</a> and to VAIarchief for <a href="https://github.com/richardlehane/siegfried/issues/127">additional report with example</a>.</li>
<li>mime-info signatures panic on some files due to duplicate entries in the freedesktop and tika signature files; spotted during an attempt at pair coding with Ross Spencer&hellip; thanks Ross and sorry for hogging the laptop! <a href="https://github.com/richardlehane/siegfried/issues/125">#125</a></li>
</ul>
</div>
<div class="pure-u-1">
<span class="signature signature-text">Share:</span>
<a class= "signature" href="https://twitter.com/intent/tweet?text=I&#43;enjoyed&#43;this&#43;post&#43;on&#43;IT&#43;for&#43;archivists%3A&#43;siegfried&#43;1.7.12&#43;released&#43;%28https%3A%2F%2Fwww.itforarchivists.com%2Fpost%2Fsf1712%2F%29">
<span class="fa-stack">
  <i class="fa fa-circle fa-stack-2x"></i>
  <i class="fa fa-twitter fa-stack-1x fa-inverse"></i>
</span>
</a>
</div>
    
    	<div id="banner" class="pure-u-1">
  <p class="article-title"><a href="https://www.itforarchivists.com/post/sf1711/">siegfried 1.7.11 released</a></p>
  <span class="article-date">Saturday, 16 February, 2019</span>
</div>    
<div class="pure-u-1">

<p>Version 1.7.11 of siegfried is now available. Get it <a href="https://www.itforarchivists.com/siegfried">here</a>.</p>

<p>This minor release fixes the debian package and allows the container matcher to identify directory names (for SIARD matching). Updates to the LOC FDD and tika-mimetypes signature files.</p>

<h3 id="change-log-v1-7-11-2019-02-16">Change Log v1.7.11 (2019-02-16)</h3>

<p>Changed:</p>

<ul>
<li>update LOC signatures to 2019-01-06</li>
<li>update tika-mimetypes signatures to v1.20</li>
</ul>

<p>Fixed:</p>

<ul>
<li>container matching can now match against directory names. Thanks Ross Spencer for <a href="https://github.com/richardlehane/siegfried/issues/123">reporting</a> and for the sample SIARD signature file. Thanks Dave Clipsham, Martin Hoppenheit and Phillip Tommerholt for contributions on the ticket.</li>
<li>fixes to travis.yml for auto-deploy of debian release; <a href="https://github.com/richardlehane/siegfried/issues/124">#124</a></li>
</ul>
</div>
<div class="pure-u-1">
<span class="signature signature-text">Share:</span>
<a class= "signature" href="https://twitter.com/intent/tweet?text=I&#43;enjoyed&#43;this&#43;post&#43;on&#43;IT&#43;for&#43;archivists%3A&#43;siegfried&#43;1.7.11&#43;released&#43;%28https%3A%2F%2Fwww.itforarchivists.com%2Fpost%2Fsf1711%2F%29">
<span class="fa-stack">
  <i class="fa fa-circle fa-stack-2x"></i>
  <i class="fa fa-twitter fa-stack-1x fa-inverse"></i>
</span>
</a>
</div>
    
    	<div id="banner" class="pure-u-1">
  <p class="article-title"><a href="https://www.itforarchivists.com/post/sf1710/">siegfried 1.7.10 released</a></p>
  <span class="article-date">Wednesday, 19 September, 2018</span>
</div>    
<div class="pure-u-1">

<p>Version 1.7.10 of siegfried is now available. Get it <a href="https://www.itforarchivists.com/siegfried">here</a>.</p>

<p>This minor release fixes a regression in the LOC identifier introduced in 1.7.9 and updates to PRONOM v94.</p>

<h3 id="changelog-v1-7-10-2018-09-19">Changelog v1.7.10 (2018-09-19)</h3>

<p>Added:</p>

<ul>
<li>print configuration defaults with <code>sf -version</code></li>
</ul>

<p>Changed:</p>

<ul>
<li>update PRONOM to v94</li>
</ul>

<p>Fixed:</p>

<ul>
<li>LOC identifier fixed after regression in v1.7.9</li>
<li>remove skeleton-suite files triggering malware warnings by adding to .gitignore; reported by <a href="https://github.com/richardlehane/siegfried/issues/118">Dave Rice</a></li>
<li>release built with Go version 11, which includes a fix for a CIFS error that caused files to be skipped during file walk; reported by <a href="https://github.com/richardlehane/siegfried/issues/115">Maarten Savels</a></li>
</ul>
</div>
<div class="pure-u-1">
<span class="signature signature-text">Share:</span>
<a class= "signature" href="https://twitter.com/intent/tweet?text=I&#43;enjoyed&#43;this&#43;post&#43;on&#43;IT&#43;for&#43;archivists%3A&#43;siegfried&#43;1.7.10&#43;released&#43;%28https%3A%2F%2Fwww.itforarchivists.com%2Fpost%2Fsf1710%2F%29">
<span class="fa-stack">
  <i class="fa fa-circle fa-stack-2x"></i>
  <i class="fa fa-twitter fa-stack-1x fa-inverse"></i>
</span>
</a>
</div>
    
    	<div id="banner" class="pure-u-1">
  <p class="article-title"><a href="https://www.itforarchivists.com/post/sf179/">siegfried 1.7.9 released</a></p>
  <span class="article-date">Thursday, 30 August, 2018</span>
</div>    
<div class="pure-u-1">

<p>Version 1.7.9 of siegfried is now available. Get it <a href="https://www.itforarchivists.com/siegfried">here</a>.
According to the <a href="https://www.itforarchivists.com/siegfried/develop/1dreh09">develop benchmarks</a>, this release is slightly more accurate than v1.7.8, with only a marginal impact on performance.</p>

<p>The highlights of this release are a new system for saving configurations for the <code>sf</code> tool, changes to the matching algorithm to improve accuracy, and simplifications to the basis field.</p>

<h2 id="save-and-load-frequently-used-configurations">Save and load frequently used configurations</h2>

<p>The new <code>-setconf</code> flag allows you to save frequently used configurations for the <code>sf</code> tool. I implemented this to make it possible to set a default <code>-multi</code> value (and not require users to type e.g. <code>sf -multi 32</code> every time they run siegfried), but you can use <code>-setconf</code> to save any frequently used flags. To save your preferred flags as defaults just type your preferred siegfried command, ommitting the file/directory argument and including <code>-setconf</code>.</p>

<p>For example, the following command records preferences for logging, output, hashing and -multi:</p>

<pre><code>sf -setconf -csv -hash md5 -multi 32 -log time,error
</code></pre>

<p>You can then just type <code>sf DIR</code> to run siegfried with those preferred settings. Configurations are stackable with additional flags used while running siegfried. For example, if you type <code>sf -json DIR</code> after setting the above configuration, you&rsquo;ll get JSON instead of CSV output for that session, but all those other preferences will be applied.</p>

<p>The <code>-conf NAME</code> flag allows you to save and load named configuration files. These configurations are saved to the path specified by the flag, rather than to the default configuration file (a sf.conf file in your siegfried home directory). Named configurations might be useful if you have a few different ways of invoking siegfried. For example, you might want to save a server configuration:</p>

<pre><code>sf -setconf -hash sha1 -z -serve localhost:5138 -sig deluxe.sig -conf server.conf
</code></pre>

<p>You can then load that configuration by just typing <code>sf -conf server.conf</code>.</p>

<h2 id="changes-to-the-matching-algorithm">Changes to the matching algorithm</h2>

<p>If you review the <a href="https://www.itforarchivists.com/siegfried/develop/1dreh09">develop benchmarks</a>, you&rsquo;ll see that there are some small differences in the results returned for v1.7.9 as compared with v1.7.8. For example, in the Govdocs corpus, a number of PDF files had been identified as fmt/134 (MPEG) previously, but are now correctly identified as various forms of PDF. This improvement in accuracy follows some changes I&rsquo;ve implemented to resolve <a href="https://github.com/richardlehane/siegfried/issues/112">this issue</a>.</p>

<p>The problem boiled down to how siegfried uses PRONOM&rsquo;s file format priority information. One of siegfried&rsquo;s optimisations (and a reason it gives fairly good performance without requiring users to set limits on bytes scanned) is that it applies format priorities in real-time. For example, if, during scanning, a match comes in for PDF then siegfried will keep scanning to see if the file is a PDF/A (or other more specific type of PDF) but it won&rsquo;t wait to see if the file is an MPEG or anything else unrelated to that initial match. Think of all the formats as a big tree: once siegfried starts climbing in a particular direction, it will only find results higher up that branch. But what if that initial match is misleading? Like those Govdocs PDFs where a noisy MPEG signature matched first?</p>

<p>The changes I&rsquo;ve made to the matching algorithm for v1.7.9 retain siegfried&rsquo;s real-time application of format priorities but with a tweak that allows siegfried to &ldquo;jump&rdquo; between branches in that format tree. The way this works is that, when each of the matchers runs (matchers are different stages in the scanning engine - i.e. the file name matcher, container matcher, byte matcher, text matcher etc.), &ldquo;hints&rdquo; are supplied based on information gleaned from previous matchers. These &ldquo;hints&rdquo; are then weighed alongside format priorities when siegfried decides what to do with format hits. For example, in the case of the Govdocs PDFs, the byte matcher receives a hint from the file name matcher that the file might be in the PDF family (because of the .pdf extension) and that hint causes the matcher to keep an open mind to the possibility that the file might well be a PDF even after that positive MPEG match has been found.</p>

<p>There is a small cost in speed for this change to the matching algorithm (because there is now this new factor that will cause siegfried to delay in returning a positive match early) but my benchmarks show that the slowdown is only very modest.</p>

<p><em>Please note</em>: these format prioritisation rules only apply to siegfried in its default mode. The <code>roy</code> tool gives you fine-grained control over how format priorities are used during matching (i.e. you can elect to scan more slowly and get more exhaustive results returned). Try the <code>roy build -multi positive</code>, <code>roy build -multi comprehensive</code> and <code>roy build -multi exhaustive</code> commands <a href="https://github.com/richardlehane/siegfried/wiki/Building-a-signature-file-with-ROY#customisable">described here</a> to see how you can fine tune your results.</p>

<h2 id="simpler-basis-field">Simpler basis field</h2>

<p>There is a small change in the information returned in the basis field for v1.7.9.</p>

<p>When reporting byte matches, siegfried returns the location (offset from the beginning of the file) and length (in bytes) of matches as pairs e.g. [10 150], which means a match at offset 10 for 150 bytes. For signatures with multiple segments (e.g. a beginning of file segment and an end of file segment), previous versions of siegfried reported a basis which was a list, of lists, of offset/length pairs. For example, you might get a basis like [[[10 150]][[25000 20]]]. The reason siegfried returned lists of lists rather than just simple lists of offset/length pairs was to account for the fact that sometimes particular segments of a signature would match at multiple points in the file. E.g. [[[10 150][30 200]][[25000 20]]] would indicate that that first segment had matched twice at different offsets and with different lengths.</p>

<p>The problem with this approach was that, for very noisy signatures (which generate a lot of segment hits), you could sometimes get very verbose basis fields in your results. In <a href="https://github.com/richardlehane/siegfried/issues/111">one reported case</a> there was 3MB of data in one of these fields! For this reason, the basis field has been simplified in v1.7.9 and now just reports the first valid set of matching segments i.e. a list of offset/length pairs like [[10 150][25000 20]]. This means fewer square brackets and no more exploding basis fields!</p>

<h2 id="other-changes">Other changes</h2>

<p>There are some other small bug fixes and tweaks in this release, as well as updates for signature files. Here&rsquo;s the full changelog:</p>

<h3 id="changelog-v1-7-9-2018-08-31">Changelog v1.7.9 (2018-08-31)</h3>

<p>Added:</p>

<ul>
<li>save defaults in a configuration file: use the -setconf flag to record any other flags used into a config file. These defaults will be loaded each time you run sf. E.g. <code>sf -multi 16 -setconf</code> then <code>sf DIR</code> (loads the new multi default)</li>
<li>use <code>-conf filename</code> to save or load from a named config file. E.g. <code>sf -multi 16 -serve :5138 -conf srv.conf -setconf</code> and then <code>sf -conf srv.conf</code></li>
<li>added <code>-yaml</code> flag so, if you set json/csv in default config :(, you can override with YAML instead. Choose the YAML!</li>
</ul>

<p>Changed:</p>

<ul>
<li>the <code>roy compare -join</code> options that join on filepath now work better when comparing results with mixed windows and unix paths</li>
<li>exported decompress package to give more functionality for users of the golang API; requested by <a href="https://github.com/richardlehane/siegfried/issues/119">Byron Ruth</a></li>
<li>update LOC signatures to 2018-06-14</li>
<li>update freedesktop.org signatures to v1.10</li>
<li>update tika-mimetype signatures to v1.18</li>
</ul>

<p>Fixed:</p>

<ul>
<li>misidentifications of some files e.g. ODF presentation due to sf quitting early on strong matches. Have adjusted this algorithm to make sf wait longer if there is evidence (e.g. from filename) that the file might be something else. Reported by <a href="https://github.com/richardlehane/siegfried/issues/112">Jean-Séverin Lair</a></li>
<li>read and other file errors caused sf to hang; reports by <a href="https://github.com/richardlehane/siegfried/issues/113">Greg Lepore and Andy Foster</a>; fix contributed by <a href="https://github.com/richardlehane/siegfried/commit/ea5300d3639d741a451522958e8b99912f7d639d">Ross Spencer</a></li>
<li>bug reading streams where EOF returned for reads exactly adjacent the end of file</li>
<li>bug in mscfb library (<a href="https://github.com/richardlehane/siegfried/issues/117">race condition for concurrent access to a global variable</a>)</li>
<li>some matches result in extremely verbose basis fields; reported by <a href="https://github.com/richardlehane/siegfried/issues/111">Nick Krabbenhoeft</a>. Partly fixed: basis field now reports a single basis for a match but work remains to speed up matching for these cases.</li>
</ul>
</div>
<div class="pure-u-1">
<span class="signature signature-text">Share:</span>
<a class= "signature" href="https://twitter.com/intent/tweet?text=I&#43;enjoyed&#43;this&#43;post&#43;on&#43;IT&#43;for&#43;archivists%3A&#43;siegfried&#43;1.7.9&#43;released&#43;%28https%3A%2F%2Fwww.itforarchivists.com%2Fpost%2Fsf179%2F%29">
<span class="fa-stack">
  <i class="fa fa-circle fa-stack-2x"></i>
  <i class="fa fa-twitter fa-stack-1x fa-inverse"></i>
</span>
</a>
</div>
    
    	<div id="banner" class="pure-u-1">
  <p class="article-title"><a href="https://www.itforarchivists.com/post/benchmarks/">Continuous benchmarking</a></p>
  <span class="article-date">Monday, 30 July, 2018</span>
</div>    
<div class="pure-u-1">

<p>The next siegfried release will be out shortly. I have been busy making changes to address two thorny issues: <a href="https://github.com/richardlehane/siegfried/issues/111">verbose basis</a> and <a href="https://github.com/richardlehane/siegfried/issues/112">missing results</a>. I have some fixes in place but, when doing large scale testing against big sets of files, I noticed some performance and quality regressions. You can see these regressions on the new <a href="https://www.itforarchivists.com/siegfried/develop">develop benchmarks page</a>. There&rsquo;s also a new <a href="https://www.itforarchivists.com/siegfried/benchmarks">benchmarks page</a> to measure siegfried against comparable file format identification tools (at this stage just <a href="http://www.nationalarchives.gov.uk/information-management/manage-information/policy-process/digital-continuity/file-profiling-tool-droid/">DROID</a>). This post is the story of how these two pages came into being.</p>

<h2 id="benchmarking-pain">Benchmarking pain</h2>

<p>Up until this point I had always done large scale testing manually and it was a fiddly and annoying process: I would have to locate test corpora on whichever machine I&rsquo;d last run a benchmark on and and copy to my current laptop; run the tests; do the comparison; interpret the results; look up how to do golang profiling again because I had forgot; run the profiler and check those results; etc. After going through all these steps, if I made changes to address issues, I&rsquo;d have to repeat it all again in order to verify I&rsquo;d fixed the issues. Obviously none of these results had much shelf life, as they depended on the vagaries of the machine I was running them on, how I had configured everything, and would be invalidated each time there was a new software or PRONOM release. I was also left with the uneasy feeling that I should be doing this kind of large scale testing much more regularly. Wouldn&rsquo;t it be nice to have some kind of continuous benchmarking process, just like the other automated tests and deployment workflows I run using <a href="https://travis-ci.org/">Travis CI</a> and <a href="https://www.appveyor.com/">appveyor</a>? And down that rabbit hole I went for the last few months&hellip;</p>

<h2 id="the-solution">The solution</h2>

<p>Today, whenever I push code changes to siegfried&rsquo;s <a href="https://github.com/richardlehane/siegfried/tree/develop">develop branch</a>, or tag a new release on the master branch, the following happens:</p>

<ul>
<li>siegfried&rsquo;s <a href="https://github.com/richardlehane/siegfried/blob/develop/.travis.yml">Travis CI script</a> runs a little program called <a href="https://github.com/richardlehane/provisioner">provisioner</a></li>
<li>provisioner buys a machine for an hour or two from <a href="https://packet.net">packet.net</a>, feeding the new machine a <a href="https://cloud-init.io/">cloud init</a> script that runs a series of install tasks (like downloading and installing siegfried)</li>
<li>the cloud init script concludes by starting another small program, <a href="https://github.com/richardlehane/runner">runner</a>, as a systemd service</li>
<li>runner downloads a list of jobs from the itforarchivists.com website (either the <a href="https://www.itforarchivists.com/siegfried/jobs/develop">develop jobs</a> or the <a href="https://www.itforarchivists.com/siegfried/jobs/bench">benchmark jobs</a>) and executes them</li>
<li>one of the early jobs is to use <a href="https://rclone.org">rclone</a> to copy the test corpora over to the test machine from <a href="https://backblaze.com">backblaze.com</a></li>
<li>after running the jobs (and timing their duration), runner posts results back to the itforachivists.com website where they are stored and displayed on the <a href="https://www.itforarchivists.com/siegfried/develop">develop</a> and <a href="https://www.itforarchivists.com/siegfried/benchmarks">benchmarks</a> pages.</li>
</ul>

<p>Benefits of this approach are:</p>

<ul>
<li>it is completely transparent. Obviously as one of the tool makers there is potential for me to show some bias. But you can see exactly what machine has run the benchmark (<a href="https://packet.net">packet.net</a> sells &ldquo;baremetal&rdquo; servers so you get a clear picture of the hardware used), what software has been installed and how it has been configured, and exactly what tasks have been run.</li>
<li>it is cheap to run: Travis CI is free for open source projects, backblaze is super cheap, backblaze has partnered with packet.net for free data transport between their data centres, and the packet.net servers are competitively priced (particularly when you buy from the spot market)</li>
<li>it is routine. For me, this is the most important thing. I no longer have to go through benchmark pain and I can view the real world impacts of any changes I make to siegfried&rsquo;s code immediately after committing changes to github.</li>
</ul>

<h2 id="some-reflections-on-the-results">Some reflections on the results</h2>

<p><a href="http://www.nationalarchives.gov.uk/information-management/manage-information/policy-process/digital-continuity/file-profiling-tool-droid/">DROID</a> has got really fast recently! Kudos to the team at the National Archives for continuing to invest in the Aston Martin of format identification tools :). I&rsquo;m particularly impressed by the DROID &ldquo;no limit&rdquo; (a -1 max bytes to scan setting in your DROID properties) results and wonder if it might make sense for future DROID releases to make that the default setting.</p>

<p>In order to make the most of SSD disks, you really need to use a <code>-multi</code> setting with sf to obtain good speeds. I&rsquo;m making this easier in the next release of siegfried by introducting a config file where you can store your preferred settings (and not type them in each time you invoke the tool).</p>

<p>If you really care about speed, you can use <code>roy</code> to build signature files with built in &ldquo;max bytes&rdquo; limits. These test runs came out fastest in all categories. But this will impact the quality of your results.</p>

<p>Siegfried is a sprinter and wins on small corpora. DROID runs marathons and wins (in the no limit category) for the biggest corpus. This is possibly because of JVM start-up costs?</p>

<p>Speed isn&rsquo;t the only thing that matters. You also need to assess the quality of results and choose a tool that has the right affordances (e.g. do your staff prefer a GUI? What kind of reporting will you need? etc.). But speed is important, particularly for non-ingest workflows (e.g. consider re-scanning your repository each time there is a PRONOM update).</p>

<p>The tools differ in their outputs. This is because of differences in their matching engines (e.g. siegfried includes a text identifier), differences in their default settings (particularly that max byte setting), and differences in the way they choose to report results (e.g. if more than one result is returned just based on extension matches, then siegfried will return UNKNOWN with a descriptive warning indicating those possibilies; DROID and fido, on the other hand, will report multiple results).</p>

<p>Where&rsquo;s <a href="https://github.com/openpreserve/fido">fido</a>? I had fido in early benchmarks but removed it because the files within the test corpora I&rsquo;ve used cause fido to come to a grinding halt for some reason. I need to inspect the error messages and follow up. I hope to get fido back onto the scoreboard shortly!</p>

<p>I need more corpora. The corpora I&rsquo;ve used reflect some use cases (e.g. scanning typical office type documents) but don&rsquo;t represent others (e.g. scanning large AV collections). Big audio and video files have caused problems for siegfried in the past and it would be great to include them in regular testing.</p>
</div>
<div class="pure-u-1">
<span class="signature signature-text">Share:</span>
<a class= "signature" href="https://twitter.com/intent/tweet?text=I&#43;enjoyed&#43;this&#43;post&#43;on&#43;IT&#43;for&#43;archivists%3A&#43;Continuous&#43;benchmarking&#43;%28https%3A%2F%2Fwww.itforarchivists.com%2Fpost%2Fbenchmarks%2F%29">
<span class="fa-stack">
  <i class="fa fa-circle fa-stack-2x"></i>
  <i class="fa fa-twitter fa-stack-1x fa-inverse"></i>
</span>
</a>
</div>
    
    	<div id="banner" class="pure-u-1">
  <p class="article-title"><a href="https://www.itforarchivists.com/post/sf178/">siegfried 1.7.8 released</a></p>
  <span class="article-date">Saturday, 2 December, 2017</span>
</div>    
<div class="pure-u-1"><p>Version 1.7.8 of siegfried is now available. Get it <a href="https://www.itforarchivists.com/siegfried">here</a>.</p>

<p>This minor release updates the PRONOM signatures to v93 and the LOC signatures to 2017-09-28.</p>

<p>As the only changes in this release are to signature files, you can just use <code>sf -update</code> if you&rsquo;ve installed siegfried manually. This minor release is just for the convenience of users who have installed sf with package managers (i.e. debian or homebrew).</p>
</div>
<div class="pure-u-1">
<span class="signature signature-text">Share:</span>
<a class= "signature" href="https://twitter.com/intent/tweet?text=I&#43;enjoyed&#43;this&#43;post&#43;on&#43;IT&#43;for&#43;archivists%3A&#43;siegfried&#43;1.7.8&#43;released&#43;%28https%3A%2F%2Fwww.itforarchivists.com%2Fpost%2Fsf178%2F%29">
<span class="fa-stack">
  <i class="fa fa-circle fa-stack-2x"></i>
  <i class="fa fa-twitter fa-stack-1x fa-inverse"></i>
</span>
</a>
</div>
    
    	<div id="banner" class="pure-u-1">
  <p class="article-title"><a href="https://www.itforarchivists.com/post/sf177/">siegfried 1.7.7 released</a></p>
  <span class="article-date">Thursday, 30 November, 2017</span>
</div>    
<div class="pure-u-1"><p>Version 1.7.7 of siegfried is now available. Happy <a href="https://twitter.com/hashtag/IDPD17">#IDPD17</a>!</p>

<p>Get it <a href="https://www.itforarchivists.com/siegfried">here</a>.</p>

<p>This minor release fixes bugs in the <code>roy inspect</code> command and in sf&rsquo;s handling of large container files.</p>

<p>A new sets file is included in this release, &lsquo;pronom-extensions.json&rsquo;, which creates sets for all extensions defined in PRONOM. You can use these new sets when building signatures e.g. <code>roy build -limit @.tiff</code> or when logging formats e.g. <code>sf -log @.doc DIR</code>.</p>

<p>The other addition in this release is the inclusion of version metadata for MIME-info signature files (e.g. freedesktop.org or tika MIME-types). You can define version metadata for MIME-info signature files by editing the MIME-info.json file in your /data directory.</p>

<p>Thanks to <a href="https://github.com/richardlehane/siegfried/issues/109">Terry Jolliffe</a> and <a href="https://github.com/richardlehane/siegfried/issues/108">Ross Spencer</a> for their bug reports.</p>

<p>See the <a href="https://github.com/richardlehane/siegfried/blob/master/CHANGELOG.md">CHANGELOG</a> for full details on this release.</p>
</div>
<div class="pure-u-1">
<span class="signature signature-text">Share:</span>
<a class= "signature" href="https://twitter.com/intent/tweet?text=I&#43;enjoyed&#43;this&#43;post&#43;on&#43;IT&#43;for&#43;archivists%3A&#43;siegfried&#43;1.7.7&#43;released&#43;%28https%3A%2F%2Fwww.itforarchivists.com%2Fpost%2Fsf177%2F%29">
<span class="fa-stack">
  <i class="fa fa-circle fa-stack-2x"></i>
  <i class="fa fa-twitter fa-stack-1x fa-inverse"></i>
</span>
</a>
</div>
    
    	<div id="banner" class="pure-u-1">
  <p class="article-title"><a href="https://www.itforarchivists.com/post/sf176/">siegfried 1.7.6 released</a></p>
  <span class="article-date">Wednesday, 4 October, 2017</span>
</div>    
<div class="pure-u-1"><p>Version 1.7.6 of siegfried is now available. Get it <a href="https://www.itforarchivists.com/siegfried">here</a>.</p>

<p>This is a minor release that incorporates the latest PRONOM update (v92), introduces a &ldquo;continue on error&rdquo; flag (sf -coe) to force sf to keep going when it hits fatal file errors in directory walks, and restricts file scanning to regular files (in previous versions symlinks, devices, sockets etc. were scanned which caused fatal errors for some users).</p>

<p>Thanks to <a href="https://github.com/richardlehane/siegfried/issues/107">Henk Vanstappen</a> for the bug report that prompted this release.</p>
</div>
<div class="pure-u-1">
<span class="signature signature-text">Share:</span>
<a class= "signature" href="https://twitter.com/intent/tweet?text=I&#43;enjoyed&#43;this&#43;post&#43;on&#43;IT&#43;for&#43;archivists%3A&#43;siegfried&#43;1.7.6&#43;released&#43;%28https%3A%2F%2Fwww.itforarchivists.com%2Fpost%2Fsf176%2F%29">
<span class="fa-stack">
  <i class="fa fa-circle fa-stack-2x"></i>
  <i class="fa fa-twitter fa-stack-1x fa-inverse"></i>
</span>
</a>
</div>
    
    	<div id="banner" class="pure-u-1">
  <p class="article-title"><a href="https://www.itforarchivists.com/post/charts/">Charts</a></p>
  <span class="article-date">Thursday, 14 September, 2017</span>
</div>    
<div class="pure-u-1">

<p>In my recent updates to this site I&rsquo;ve added a new &ldquo;Chart your results&rdquo; tool on the <a href="https://www.itforarchivists.com/siegfried">siegfried</a> page (in the right hand panel under &ldquo;Try Siegfried&rdquo;). This tool produces single page reports like this: <a href="https://www.itforarchivists.com/siegfried/results/ea1zaj">/siegfried/results/ea1zaj</a>.</p>

<p>Before covering this tool in detail let&rsquo;s recap some of the existing ways you can already analyse your results.</p>

<h2 id="other-ways-of-charting-and-analysing-your-results">Other ways of charting and analysing your results</h2>

<h3 id="command-line-charting">Command-line charting</h3>

<p>I appreciate that not everyone is a command-line junkie, but the way I inspect results is just to use sf&rsquo;s -log flag. If you do <code>sf -log chart</code> (or <code>-log c</code>) you can make simple format charts:</p>

<p><img src="https://www.itforarchivists.com/img/sf-chart.png" alt="sf chart" /></p>

<p><em>(In these examples I add &ldquo;o&rdquo; to my log options to direct logging output to STDOUT&hellip; otherwise you&rsquo;ll see it in STDERR).</em></p>

<p>A chart can be a starting point for deeper analysis e.g. inspecting lists of files of a particular format:</p>

<p><img src="https://www.itforarchivists.com/img/sf-fmt61.png" alt="sf log fmt/61" /></p>

<p>You can also inspect lists of unknowns with <code>-log u</code> and warnings with <code>-log w</code>.</p>

<p>Rather than re-run the format identification job with every step, you can pair these commands with the <code>-replay</code> flag to run them against a pre-generated results file instead. I cover this workflow in detail in the <a href="https://github.com/richardlehane/siegfried/wiki/Identifying-file-formats#replaying-a-scan-from-results-files">siegfried wiki</a>.</p>

<h3 id="standalone-tools">Standalone tools</h3>

<p>It would be remiss of me not to mention the two great standalone tools that Ross Spencer and Tim Walsh have written for analysing your results: <a href="https://github.com/exponential-decay/droid-siegfried-sqlite-analysis-engine">DROID-SF sqlite analysis</a> and <a href="https://github.com/timothyryanwalsh/brunnhilde">Brunnhilde</a>.</p>

<p>These tools both do a lot more than simple chart generation. E.g. DROID-SF can create a &ldquo;Rogues Gallery&rdquo; of all your problematic files. Brunnhilde has a GUI, does virus scanning, and can also run bulk_extractor against your files. I&rsquo;d definitely encourage you to check both of these tools out!</p>

<h2 id="chart-your-results">Chart your results</h2>

<p>If your needs are a little bit simpler, and you just want a chart, then my new &ldquo;Chart your results&rdquo; tool might be a good fit.</p>

<p>To try this tool, go to the <a href="https://www.itforarchivists.com/siegfried">siegfried</a> page and upload a results file in the &ldquo;Chart my results&rdquo; form in the right-hand panel.</p>

<p>Let&rsquo;s run through some of its features:</p>

<ul>
<li>it can handle siegfried, DROID and fido results files</li>
<li>it gives you a single page, interactive report</li>
<li>pie charts for format IDs and MIME-types</li>
<li>highlights unknowns, errors, warnings, multiple IDs and duplicates (if you have checksums)</li>
<li>you can drill-down on all of those features and formats to generate lists that you can export as CSV or to your clipboard</li>
<li>supports multiple identifiers (a siegfried feature): each identifier is a separate single page report.</li>
</ul>

<p>Probably the distinguishing feature of this tool is that you can easily share your analysis with colleagues, or with the digital preservation community broadly, by &ldquo;publishing&rdquo; your results. This gives you a permanent URL (like <a href="https://www.itforarchivists.com/siegfried/results/ea1zaj">https://www.itforarchivists.com/siegfried/results/ea1zaj</a>) and stores your results on the site. Prior to publication you can opt to &ldquo;redact&rdquo; your filenames if they contain sensitive information. I&rsquo;ve added a <a href="https://www.itforarchivists.com/about/privacy">privacy</a> section to this site to address some of the privacy questions raised by this feature in a little more detail.</p>

<p>That&rsquo;s it, please use it, and if you like it tweet your results!</p>
</div>
<div class="pure-u-1">
<span class="signature signature-text">Share:</span>
<a class= "signature" href="https://twitter.com/intent/tweet?text=I&#43;enjoyed&#43;this&#43;post&#43;on&#43;IT&#43;for&#43;archivists%3A&#43;Charts&#43;%28https%3A%2F%2Fwww.itforarchivists.com%2Fpost%2Fcharts%2F%29">
<span class="fa-stack">
  <i class="fa fa-circle fa-stack-2x"></i>
  <i class="fa fa-twitter fa-stack-1x fa-inverse"></i>
</span>
</a>
</div>
    
  
</div>
<div class="footer"><footer>© Richard Lehane</footer></div>
</body>
</html>
